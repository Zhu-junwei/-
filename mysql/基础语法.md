# 字符串长度

## LENGTH（）

```mysql
-- 字节长度
/*
 用法: LENGTH(str),返回字符串所占字节长度
 计算单位：字节
 utf8编码：一个汉字三个字节，一个数字或字母一个字节。
 gbk编码：一个汉字两个字节，一个数字或字母一个字节。
*/
SELECT LENGTH('abc'); -- 3
SELECT LENGTH('中'); -- 3
SELECT LENGTH(''); -- 0
SELECT LENGTH(NULL); -- NULL
```

## CHAR_LENGTH（）

```mysql
-- CHAR_LENGTH()字符长度（个数）
/*
计算单位：字符
不管汉字还是数字或者是字母都算是一个字符
*/
SELECT CHAR_LENGTH('abc'); -- 3
SELECT CHAR_LENGTH('中'); -- 1
SELECT CHAR_LENGTH(''); -- 0
SELECT CHAR_LENGTH(NULL); -- NULL
```

**[扩展](https://blog.csdn.net/qq_39390545/article/details/106618423)**

>MySQL5.0.3版本之后varchar类型大小的计算方式有所变化，从最早的按字节算大小varchar(length)改成了varchar(char_length)。
>
>1）MySQL 5.0.3 之前：
>
>- 数据类型大小：0--255字节
>
>- 详解：varchar(20)中的20表示字节数，如果存放utf-8编码的话只能放6个汉字。varchar(n)，这里的n表示字节数。
>
>2）MySQL 5.0.3之后：
>
>- 数据类型大小：0--65535字节，但最多占65532字节（其中需要用两个字节存放长度，小于255字节用1个字节存放长度）
>- 详解：varchar(20)表示字符数，不管什么编码，不管是英文还是中文都可以存放20个。

# 字符串拼接

## 拼接多个字符串

```mysql
/*
用法:CONCAT(str1,str2,...)
*/
SELECT CONCAT('a','b'),CONCAT('gg','dd','addd') AS name;
```

## 以某个分隔符拼接字符串
```mysql
/*
用法:CONCAT_WS(separator,str1,str2,...)
	- separator: 分隔符
*/
SELECT CONCAT_WS('#','123',456,'789');
```


# 转大小写
```mysql
SELECT UPPER('asagdh'),LOWER('SDGsd');
```


# 去掉空格
```mysql
-- 左右都去除
SELECT TRIM('  SDADG  ');
-- 左去除
SELECT LTRIM('  SDADG  ');
-- 右去除
SELECT RTRIM('  SDADG  ');
```

# 字符串截取
## LEFT()

```mysql
-- 截取左边前四位，不够四位返回所有值
SELECT LEFT('2020我是谁123',4); -- 2020
SELECT LEFT('202',4); -- 202
SELECT LEFT(NULL,4); -- NULL
```

## RIGHT()

```mysql
-- 右截取后三位，不够三位返回所有值
SELECT RIGHT('2020我是谁123',3); -- 123
SELECT RIGHT('23',3); -- 23
SELECT RIGHT('',3); -- ''
SELECT RIGHT(NULL,3); -- NULL
```

## SUBSTRING()

```mysql
SELECT SUBSTRING('2020我是谁123',5); -- 我是谁123
SELECT SUBSTRING('2020我是谁123',-3); -- 123
SELECT SUBSTRING('2020我是谁123',-3,2); -- 12
SELECT SUBSTRING('2020我是谁123', 5, 3); -- 我是谁
```

## SUBSTRING_INDEX()

> 按关键字进行截取

```mysql
/*
 用法：substring_index(str, delim, count)，即：substring_index(被截取字符串，关键字，关键字出现的次数)
*/
-- 截取第二个“.”之前的所有字符
SELECT SUBSTRING_INDEX('ab,cd,ef,ghj', ',', 2); -- ab,cd
-- 截取倒数第二个“.”之后的所有字符
SELECT SUBSTRING_INDEX('ab,cd,ef,ghj', ',', -2); -- ef,ghj
-- 如果关键字不存在，则返回整个字符串
SELECT SUBSTRING_INDEX('ab,cd,ef,ghj', 'abc', 1); -- ab,cd,ef,ghj
```

## LIMIT OFFSET

> 限制结果

```mysql
-- 取5行数据
SELECT prod_name FROM products LIMIT 5;
-- 从第3行开始取5行数据
SELECT prod_name FROM products LIMIT 5 OFFSET 2;
-- 从第6行开始取1行数据
SELECT prod_name FROM products LIMIT 5,1;
```

## 排序 ORDER BY

```mysql
-- 单个列排序
SELECT prod_name FROM products ORDER BY prod_name;
-- 多个列排序
SELECT prod_id, prod_price, prod_name FROM products;
```
